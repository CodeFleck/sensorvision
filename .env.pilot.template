# ==============================================================================
# SensorVision Pilot Program Environment Variables
# ==============================================================================
# This file contains the production-ready configuration for the pilot program
# Copy this file to .env.pilot and fill in the actual values
# DO NOT commit .env.pilot to version control
# ==============================================================================

# ==============================================================================
# ENVIRONMENT IDENTIFICATION
# ==============================================================================
SPRING_PROFILES_ACTIVE=pilot
ENVIRONMENT=pilot
PILOT_MODE=true

# ==============================================================================
# DATABASE CONFIGURATION (RDS PostgreSQL Multi-AZ)
# ==============================================================================
DB_URL=jdbc:postgresql://sensorvision-pilot-db.cluster-xyz.us-west-2.rds.amazonaws.com:5432/sensorvision
DB_USERNAME=sensorvision_pilot
DB_PASSWORD=${AWS_SECRETS_MANAGER:pilot/database/password}
DB_POOL_SIZE=20
DB_POOL_MIN_IDLE=5
DB_POOL_MAX_LIFETIME=1800000
DB_CONNECTION_TIMEOUT=20000
DB_IDLE_TIMEOUT=300000
DB_LEAK_DETECTION_THRESHOLD=60000

# SSL Configuration for Database
DB_SSL_MODE=require
DB_SSL_CERT_PATH=/app/certs/rds-ca-2019-root.pem

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================
# JWT Configuration (8-hour expiration for pilot)
JWT_SECRET=${AWS_SECRETS_MANAGER:pilot/jwt/secret}
JWT_EXPIRATION_MS=28800000
JWT_ISSUER=https://pilot.sensorvision.io
JWT_REFRESH_EXPIRATION_MS=604800000

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true
ACCOUNT_LOCKOUT_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Session Security
SESSION_TIMEOUT_MINUTES=480
REMEMBER_ME_TOKEN_VALIDITY_SECONDS=1209600

# ==============================================================================
# SSL/TLS CONFIGURATION
# ==============================================================================
SERVER_SSL_ENABLED=true
SERVER_SSL_KEY_STORE=/app/certs/pilot.sensorvision.io.p12
SERVER_SSL_KEY_STORE_PASSWORD=${AWS_SECRETS_MANAGER:pilot/ssl/keystore-password}
SERVER_SSL_KEY_STORE_TYPE=PKCS12
SERVER_SSL_KEY_ALIAS=pilot.sensorvision.io

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' wss: https:

# ==============================================================================
# APPLICATION URLS (HTTPS Only)
# ==============================================================================
APP_BASE_URL=https://pilot.sensorvision.io
FRONTEND_URL=https://pilot.sensorvision.io
API_BASE_URL=https://pilot.sensorvision.io/api/v1
WEBSOCKET_URL=wss://pilot.sensorvision.io/ws

# OAuth2 Configuration
OAUTH2_REDIRECT_BASE_URL=https://pilot.sensorvision.io
GOOGLE_CLIENT_ID=${AWS_SECRETS_MANAGER:pilot/oauth2/google-client-id}
GOOGLE_CLIENT_SECRET=${AWS_SECRETS_MANAGER:pilot/oauth2/google-client-secret}

# ==============================================================================
# EMAIL CONFIGURATION (AWS SES)
# ==============================================================================
EMAIL_ENABLED=true
EMAIL_FROM=noreply@pilot.sensorvision.io
EMAIL_REPLY_TO=pilot-support@sensorvision.io

# AWS SES Configuration
SMTP_HOST=email-smtp.us-west-2.amazonaws.com
SMTP_PORT=587
SMTP_USERNAME=${AWS_SECRETS_MANAGER:pilot/ses/smtp-username}
SMTP_PASSWORD=${AWS_SECRETS_MANAGER:pilot/ses/smtp-password}
SMTP_START_TLS_ENABLED=true
SMTP_AUTH=true

# Email Templates
EMAIL_TEMPLATE_WELCOME=pilot-welcome
EMAIL_TEMPLATE_PASSWORD_RESET=pilot-password-reset
EMAIL_TEMPLATE_ALERT=pilot-alert-notification

# ==============================================================================
# SMS CONFIGURATION (TWILIO)
# ==============================================================================
SMS_ENABLED=true
SMS_FROM_NUMBER=${AWS_SECRETS_MANAGER:pilot/twilio/phone-number}
TWILIO_ACCOUNT_SID=${AWS_SECRETS_MANAGER:pilot/twilio/account-sid}
TWILIO_AUTH_TOKEN=${AWS_SECRETS_MANAGER:pilot/twilio/auth-token}

# SMS Rate Limiting
SMS_RATE_LIMIT_PER_HOUR=10
SMS_RATE_LIMIT_PER_DAY=50

# ==============================================================================
# MQTT CONFIGURATION
# ==============================================================================
MQTT_BROKER_URL=ssl://pilot.sensorvision.io:8883
MQTT_USERNAME=${AWS_SECRETS_MANAGER:pilot/mqtt/username}
MQTT_PASSWORD=${AWS_SECRETS_MANAGER:pilot/mqtt/password}
MQTT_DEVICE_AUTH_REQUIRED=true
MQTT_SSL_ENABLED=true
MQTT_MAX_CONNECTIONS=1000
MQTT_KEEPALIVE_SECONDS=60
MQTT_CLEAN_SESSION=true

# ==============================================================================
# PILOT PROGRAM CONFIGURATION
# ==============================================================================
# Pilot Quotas and Limits
PILOT_MAX_ORGANIZATIONS=10
PILOT_MAX_USERS_PER_ORG=50
PILOT_MAX_DEVICES_PER_ORG=100
PILOT_MAX_DASHBOARDS_PER_ORG=20
PILOT_MAX_RULES_PER_ORG=50
PILOT_MAX_API_CALLS_PER_DAY=100000
PILOT_MAX_TELEMETRY_POINTS_PER_DAY=1000000
PILOT_DATA_RETENTION_DAYS=90

# Pilot Features
PILOT_FEATURES_ENABLED=plugin_marketplace,advanced_analytics,fleet_monitoring,synthetic_variables
PILOT_FEATURES_DISABLED=white_labeling,custom_branding,unlimited_retention

# Pilot Support
PILOT_SUPPORT_EMAIL=pilot-support@sensorvision.io
PILOT_SUPPORT_SLACK_WEBHOOK=${AWS_SECRETS_MANAGER:pilot/slack/webhook-url}
PILOT_FEEDBACK_ENABLED=true

# ==============================================================================
# CACHING CONFIGURATION (Redis ElastiCache)
# ==============================================================================
REDIS_ENABLED=true
REDIS_HOST=sensorvision-pilot-cache.xyz.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=${AWS_SECRETS_MANAGER:pilot/redis/password}
REDIS_SSL_ENABLED=true
REDIS_TIMEOUT=2000
REDIS_POOL_MAX_ACTIVE=20
REDIS_POOL_MAX_IDLE=10
REDIS_POOL_MIN_IDLE=5

# Cache TTL Settings (seconds)
CACHE_TTL_DEVICES=300
CACHE_TTL_TELEMETRY_LATEST=60
CACHE_TTL_ANALYTICS=600
CACHE_TTL_USER_SESSIONS=3600

# ==============================================================================
# MONITORING AND LOGGING
# ==============================================================================
# Logging Configuration
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_ORG_SENSORVISION=INFO
LOGGING_LEVEL_ORG_SENSORVISION_PILOT=DEBUG
LOGGING_LEVEL_SECURITY=INFO

# Log Aggregation
LOG_AGGREGATION_ENABLED=true
CLOUDWATCH_LOG_GROUP=/aws/ecs/sensorvision-pilot
CLOUDWATCH_LOG_STREAM=backend

# Metrics and Monitoring
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
ACTUATOR_ENDPOINTS_ENABLED=health,prometheus,metrics,info
ACTUATOR_SECURITY_ENABLED=true

# Performance Monitoring
APM_ENABLED=true
NEW_RELIC_LICENSE_KEY=${AWS_SECRETS_MANAGER:pilot/newrelic/license-key}
NEW_RELIC_APP_NAME=SensorVision-Pilot

# ==============================================================================
# RATE LIMITING
# ==============================================================================
RATE_LIMITING_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_REQUESTS_PER_HOUR=10000
RATE_LIMIT_BURST_CAPACITY=100

# API-specific rate limits
RATE_LIMIT_AUTH_PER_MINUTE=10
RATE_LIMIT_TELEMETRY_PER_MINUTE=1000
RATE_LIMIT_DASHBOARD_PER_MINUTE=100

# ==============================================================================
# BACKUP AND DISASTER RECOVERY
# ==============================================================================
BACKUP_ENABLED=true
BACKUP_S3_BUCKET=sensorvision-pilot-backups
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE_CRON=0 2 * * *

# Cross-region backup
BACKUP_CROSS_REGION_ENABLED=true
BACKUP_CROSS_REGION_BUCKET=sensorvision-pilot-backups-dr

# ==============================================================================
# EXTERNAL INTEGRATIONS
# ==============================================================================
# Webhook Configuration
WEBHOOK_ENABLED=true
WEBHOOK_TIMEOUT_MS=5000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_MS=1000

# Slack Integration
SLACK_ENABLED=true
SLACK_WEBHOOK_URL=${AWS_SECRETS_MANAGER:pilot/slack/webhook-url}
SLACK_CHANNEL=#sensorvision-pilot

# PagerDuty Integration
PAGERDUTY_ENABLED=true
PAGERDUTY_INTEGRATION_KEY=${AWS_SECRETS_MANAGER:pilot/pagerduty/integration-key}

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
FEATURE_PLUGIN_MARKETPLACE=true
FEATURE_SYNTHETIC_VARIABLES=true
FEATURE_FLEET_MONITORING=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_REAL_TIME_STREAMING=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_WEBHOOK_NOTIFICATIONS=true
FEATURE_OAUTH2_LOGIN=true
FEATURE_API_KEYS=true
FEATURE_DATA_EXPORT=true
FEATURE_DASHBOARD_SHARING=true

# Pilot-specific features
FEATURE_PILOT_FEEDBACK=true
FEATURE_PILOT_ANALYTICS=true
FEATURE_PILOT_SUPPORT_CHAT=true

# ==============================================================================
# SIMULATOR (DISABLED IN PILOT)
# ==============================================================================
SIMULATOR_ENABLED=false

# ==============================================================================
# AWS CONFIGURATION
# ==============================================================================
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=${AWS_SECRETS_MANAGER:pilot/aws/access-key-id}
AWS_SECRET_ACCESS_KEY=${AWS_SECRETS_MANAGER:pilot/aws/secret-access-key}

# S3 Configuration
S3_BUCKET_NAME=sensorvision-pilot-data
S3_BUCKET_REGION=us-west-2

# CloudWatch Configuration
CLOUDWATCH_NAMESPACE=SensorVision/Pilot
CLOUDWATCH_ENABLED=true

# ==============================================================================
# DEVELOPMENT AND DEBUGGING (DISABLED IN PILOT)
# ==============================================================================
DEBUG_MODE=false
SPRING_DEVTOOLS_ENABLED=false
H2_CONSOLE_ENABLED=false
ACTUATOR_SHUTDOWN_ENABLED=false