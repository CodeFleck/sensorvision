# ==============================================================================
# SensorVision Pilot Program Configuration
# ==============================================================================
# This configuration file contains pilot-specific settings that override
# the default application properties when the 'pilot' profile is active

# ==============================================================================
# PILOT MODE ACTIVATION
# ==============================================================================
pilot.mode=true

# ==============================================================================
# PILOT QUOTAS AND LIMITS
# ==============================================================================
pilot.max-organizations=10
pilot.max-users-per-org=50
pilot.max-devices-per-org=100
pilot.max-dashboards-per-org=20
pilot.max-rules-per-org=50
pilot.max-api-calls-per-day=100000
pilot.max-telemetry-points-per-day=1000000
pilot.data-retention-days=90

# ==============================================================================
# PILOT FEATURES
# ==============================================================================
pilot.features-enabled=plugin_marketplace,advanced_analytics,fleet_monitoring,synthetic_variables,real_time_streaming,email_notifications,sms_notifications,webhook_notifications,oauth2_login,api_keys,data_export,dashboard_sharing
pilot.features-disabled=white_labeling,custom_branding,unlimited_retention

# ==============================================================================
# PILOT SUPPORT CONFIGURATION
# ==============================================================================
pilot.support.email=pilot-support@sensorvision.io
pilot.support.slack-webhook=${PILOT_SUPPORT_SLACK_WEBHOOK:}
pilot.support.slack-channel=#sensorvision-pilot
pilot.support.feedback-enabled=true
pilot.support.chat-enabled=true

# ==============================================================================
# PILOT ANALYTICS CONFIGURATION
# ==============================================================================
pilot.analytics.enabled=true
pilot.analytics.detailed-tracking=true
pilot.analytics.reporting-interval-hours=24
pilot.analytics.tracked-events=user_login,device_created,dashboard_viewed,rule_created,alert_triggered,plugin_installed,feedback_submitted

# ==============================================================================
# PILOT NOTIFICATIONS
# ==============================================================================
pilot.notifications.welcome-email-enabled=true
pilot.notifications.weekly-digest-enabled=true
pilot.notifications.feedback-reminder-enabled=true
pilot.notifications.feedback-reminder-days=7
pilot.notifications.slack-notifications-enabled=true

# ==============================================================================
# SECURITY ENHANCEMENTS FOR PILOT
# ==============================================================================
# JWT Configuration (shorter expiration for pilot)
app.jwt.expiration-ms=28800000
app.jwt.refresh-expiration-ms=604800000

# Password Policy
security.password.min-length=12
security.password.require-uppercase=true
security.password.require-lowercase=true
security.password.require-numbers=true
security.password.require-special-chars=true

# Account Security
security.account.lockout-attempts=5
security.account.lockout-duration-minutes=30
security.session.timeout-minutes=480
security.remember-me.token-validity-seconds=1209600

# Security Headers
security.headers.enabled=true
security.headers.hsts.max-age=31536000
security.headers.csp.policy=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' wss: https:

# ==============================================================================
# RATE LIMITING FOR PILOT
# ==============================================================================
rate-limiting.enabled=true
rate-limiting.requests-per-minute=1000
rate-limiting.requests-per-hour=10000
rate-limiting.burst-capacity=100

# API-specific rate limits
rate-limiting.auth-per-minute=10
rate-limiting.telemetry-per-minute=1000
rate-limiting.dashboard-per-minute=100

# ==============================================================================
# CACHING CONFIGURATION
# ==============================================================================
spring.cache.type=redis
spring.redis.host=${REDIS_HOST:localhost}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:}
spring.redis.ssl=${REDIS_SSL_ENABLED:false}
spring.redis.timeout=${REDIS_TIMEOUT:2000ms}

# Cache TTL settings
cache.ttl.devices=300
cache.ttl.telemetry-latest=60
cache.ttl.analytics=600
cache.ttl.user-sessions=3600

# ==============================================================================
# DATABASE CONFIGURATION FOR PILOT
# ==============================================================================
# Connection pool settings for pilot load
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.leak-detection-threshold=60000

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================
logging.level.org.sensorvision.pilot=DEBUG
logging.level.org.sensorvision.service.PilotQuotaService=INFO
logging.level.org.sensorvision.service.PilotAnalyticsService=INFO
logging.level.org.sensorvision.service.PilotFeedbackService=INFO
logging.level.org.sensorvision.controller.PilotController=INFO

# Structured logging for pilot
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [PILOT] %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [PILOT] %logger{36} - %msg%n

# ==============================================================================
# MONITORING AND METRICS
# ==============================================================================
management.endpoints.web.exposure.include=health,prometheus,metrics,info
management.endpoint.health.show-details=when-authorized
management.metrics.tags.application=sensorvision-pilot
management.metrics.tags.environment=pilot

# Custom metrics
management.metrics.enable.pilot=true
management.metrics.enable.quota=true
management.metrics.enable.feedback=true

# ==============================================================================
# EMAIL CONFIGURATION FOR PILOT
# ==============================================================================
spring.mail.host=${SMTP_HOST:email-smtp.us-west-2.amazonaws.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=${SMTP_HOST:email-smtp.us-west-2.amazonaws.com}

# Email templates for pilot
email.template.welcome=pilot-welcome
email.template.password-reset=pilot-password-reset
email.template.alert=pilot-alert-notification
email.template.feedback-acknowledgment=pilot-feedback-acknowledgment
email.template.weekly-digest=pilot-weekly-digest

# ==============================================================================
# SMS CONFIGURATION FOR PILOT
# ==============================================================================
sms.enabled=${SMS_ENABLED:true}
twilio.account-sid=${TWILIO_ACCOUNT_SID:}
twilio.auth-token=${TWILIO_AUTH_TOKEN:}
twilio.phone-number=${SMS_FROM_NUMBER:}

# SMS rate limiting
sms.rate-limit.per-hour=10
sms.rate-limit.per-day=50

# ==============================================================================
# MQTT CONFIGURATION FOR PILOT
# ==============================================================================
mqtt.broker.url=${MQTT_BROKER_URL:ssl://pilot.sensorvision.io:8883}
mqtt.broker.username=${MQTT_USERNAME:}
mqtt.broker.password=${MQTT_PASSWORD:}
mqtt.device-auth-required=true
mqtt.ssl-enabled=true
mqtt.max-connections=1000
mqtt.keepalive-seconds=60
mqtt.clean-session=true

# ==============================================================================
# BACKUP AND DISASTER RECOVERY
# ==============================================================================
backup.enabled=true
backup.s3.bucket=${BACKUP_S3_BUCKET:sensorvision-pilot-backups}
backup.retention-days=30
backup.schedule.cron=0 2 * * *
backup.cross-region.enabled=true
backup.cross-region.bucket=${BACKUP_CROSS_REGION_BUCKET:sensorvision-pilot-backups-dr}

# ==============================================================================
# EXTERNAL INTEGRATIONS
# ==============================================================================
# Webhook configuration
webhook.enabled=true
webhook.timeout-ms=5000
webhook.retry-attempts=3
webhook.retry-delay-ms=1000

# Slack integration
slack.enabled=${SLACK_ENABLED:true}
slack.webhook-url=${SLACK_WEBHOOK_URL:}
slack.channel=${SLACK_CHANNEL:#sensorvision-pilot}

# PagerDuty integration
pagerduty.enabled=${PAGERDUTY_ENABLED:false}
pagerduty.integration-key=${PAGERDUTY_INTEGRATION_KEY:}

# ==============================================================================
# PERFORMANCE TUNING FOR PILOT
# ==============================================================================
# Async processing
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=50
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=pilot-async-

# WebSocket configuration
websocket.max-sessions=200
websocket.buffer-size=8192
websocket.idle-timeout=300000

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
feature.plugin-marketplace=true
feature.synthetic-variables=true
feature.fleet-monitoring=true
feature.advanced-analytics=true
feature.real-time-streaming=true
feature.email-notifications=true
feature.sms-notifications=true
feature.webhook-notifications=true
feature.oauth2-login=true
feature.api-keys=true
feature.data-export=true
feature.dashboard-sharing=true

# Pilot-specific features
feature.pilot-feedback=true
feature.pilot-analytics=true
feature.pilot-support-chat=true

# ==============================================================================
# SIMULATOR (DISABLED IN PILOT)
# ==============================================================================
simulator.enabled=false

# ==============================================================================
# DEVELOPMENT FEATURES (DISABLED IN PILOT)
# ==============================================================================
spring.devtools.restart.enabled=false
spring.h2.console.enabled=false
management.endpoint.shutdown.enabled=false
debug=false